

---
# 写入优化

- 如果是集群首次灌入数据,可以将副本数设置为0，写入完毕再调整回去，这样副本分片只需要拷贝，节省了索引过程/如果要进行大量批量导入，请考虑通过设置index.number_of_replicas来禁用副本：0。

主要原因在于：复制文档时，将整个文档发送到副本节点，并逐字重复索引过程。这意味着每个副本都将执行分析，索引和潜在合并过程。

相反，如果使用零副本进行索引，然后在提取完成时启用副本，则恢复过程本质上是逐字节的网络传输。 这比复制索引过程更有效。



参考链接：

- https://www.jianshu.com/p/f67b046b4d3f
- https://www.easyice.cn/archives/207#refresh_interval
- https://kuaibao.qq.com/s/20180405G021ZA00?refer=spider

---
# refresh_interval
设置刷新时间
```
PUT /ag_advertisement_test/_settings
{
    "index" : {
        "refresh_interval" : "-1"
    }
}
```
设置后，更新并不能通过_search是获取到最新的数据，
但是如果：直接去获取单个文档的数据（`GET ag_advertisement_test/data/1000003?parent=1900d3a59d00c93b26678287e6df0185`），
会发现最新的数据.并且发现_search的部分数据已经刷新到最新。

而且如果再次再次更新单个文档的， 会把旧的版本刷新到可搜素，但仍不是最新的，而且也发现_search的部分数据已经刷新到最新



